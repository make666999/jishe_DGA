<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>集合列表展示</title>
    <!-- 引入样式文件等 -->
</head>
<body>
    <div class="collection-list-container">
        <h2>数据库集合</h2>
        <ul id="collection-list">
            <!-- WebSocket数据将在这里显示 -->
        </ul>
    </div>

    <!-- WebSocket 脚本 -->
    <script >
        document.addEventListener('DOMContentLoaded', () => {  // 确保DOM完全加载完成
    const wsUrl = 'ws://192.168.137.97:8000/collection_names'; // 根据实际情况调整WebSocket地址
    const ws = new WebSocket(wsUrl);

    ws.onopen = function(event) {
        console.log('Connected to WebSocket');
    };

    ws.onerror = function(error) {
        console.log('WebSocket Error: ' + error);
    };

    ws.onmessage = function(event) {
        const collectionList = document.getElementById('collection-list');
        const data = JSON.parse(event.data); // 假设服务器发送的是JSON格式的集合名称数组

        collectionList.innerHTML = ''; // 清空当前列表

        data.forEach((collectionName) => {
            const listItem = document.createElement('li');
            listItem.textContent = collectionName;
            collectionList.appendChild(listItem);
        });
    };

    ws.onclose = function(event) {
        console.log('WebSocket connection closed');
    };
});

    </script>
</body>
</html>
